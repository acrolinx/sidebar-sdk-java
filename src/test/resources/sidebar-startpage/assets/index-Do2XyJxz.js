var gt=Object.defineProperty;var _t=(t,e,r)=>e in t?gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var I=(t,e,r)=>_t(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var N={},ke;function vt(){if(ke)return N;ke=1,Object.defineProperty(N,"__esModule",{value:!0}),N.LogEntryType=N.MessageType=N.SoftwareComponentCategory=void 0,N.SoftwareComponentCategory={MAIN:"MAIN",DEFAULT:"DEFAULT",DETAIL:"DETAIL"};var t;(function(r){r.success="success",r.info="info",r.warning="warning",r.error="error"})(t||(N.MessageType=t={}));var e;return function(r){r.debug="debug",r.info="info",r.warning="warning",r.error="error"}(e||(N.LogEntryType=e={})),N}var U=vt();let $;function ge(t,e){const[r,...n]=e;return typeof r=="string"?{type:t,message:r,details:n}:{type:t,message:"Details",details:e}}function L(...t){try{console.log(...t),$&&$(ge(U.LogEntryType.info,t))}catch{}}function re(...t){try{console.warn(...t),$&&$(ge(U.LogEntryType.warning,t))}catch{}}function A(...t){try{console.error(...t),$&&$(ge(U.LogEntryType.error,t))}catch{}}function ae(t){$=t}function St(t){return document.querySelector(t)}function X(t){return document.getElementById(t)}function bt(t,e,r="block"){t.style&&(t.style.display=e?r:"none")}function K(t,e){return t.indexOf(e)===0}function xt(t,e){return e.some(r=>K(t,r))}const At=new RegExp("^(?:(?:https?)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");function wt(t,e){const r=t.trim();if(K(r,"/"))return We(e.windowLocation)+r;const n=8031,o=kt(r,":443")||_e(e)?"https":"http",i=r.replace(/\/$/,""),a=K(i,"http")?i:o+"://"+i;return/\/\/.+((:\d+.*)|(\/.+))$/.test(a)?a:K(a,"http:")?a+":"+n:a}function Ce(t,e){return t.replace(/\/$/,"")+"/"+e.replace(/^\//,"")}function _e(t){return t.enforceHTTPS||t.windowLocation.protocol==="https:"}function We(t){return Lt(t.protocol)?t.protocol+"//"+t.hostname+(t.port?":"+t.port:""):""}function Lt(t){return t==="http:"||t==="https:"}function Oe(t){return K(t,"http:")}function yt(t){return At.test(t)}function kt(t,e){return t.indexOf(e)>=0}function Ct(){const t=window.location;return t.protocol+"//"+t.hostname+(t.port?":"+t.port:"")}function It(t,e){const r=t.slice();return r.sort((n,o)=>{const i=e(n),a=e(o);return i.localeCompare(a)}),r}function Ie(t,e){for(let r=0;r<t.length;r++){const n=t[r]||0,o=e[r]||0;if(n>o)return!0;if(n<o)return!1}return!0}function Rt(t){if(!t)return[];if(!/^(\d+.?)+$/.test(t))return A("Invalid version number:",t),[];try{return t.split(".").map(e=>parseInt(e,10))}catch(e){return A("Invalid version number:",t,e),[]}}function Pt(t,e){const r=t.querySelector("iframe");if(r)try{r.src="about:blank",setTimeout(()=>{t.innerHTML="",e()},0)}catch(n){A(n),e()}else e()}function Et(t){const e=document.createElement("script");return e.src=t,e.type="text/javascript",e.async=!1,e.defer=!1,e}function Ut(t){const e=document.querySelector("head");e?e.appendChild(Et(t)):A(`Can not load script "${t}" because of missing head element.`)}class Ft{constructor(e,r){I(this,"timeoutId");this.onTimeout=e,this.durationMs=r}start(){this.timeoutId!==void 0&&(this.stop(),re("TimeoutWatcher: start was called twice")),this.timeoutId=setTimeout(()=>{this.timeoutId=void 0,this.onTimeout()},this.durationMs)}stop(){this.timeoutId===void 0?re("TimeoutWatcher: stop was called before start"):(clearTimeout(this.timeoutId),this.timeoutId=void 0)}}const Tt=/^https:\/\/[a-z-_]+\.(corp\.google\.com|gcpnode\.com|corp\.goog)(:[0-9]+)?/;function qe(t){return Tt.test(t)}class Y extends Error{constructor(e,r,n){super(r),this.acrolinxErrorCode=e,this.url=n}}function Dt(t,e,r){try{const n=new XMLHttpRequest;n.open("GET",t,!0),n.onload=()=>{n.status>=200&&n.status<400?r(n.responseText):r(new Y("httpErrorStatus",`Error while loading ${t}. Status = ${n.status}`,t))},e.timeout&&(n.timeout=e.timeout),n.ontimeout=()=>{r(new Y("timeout",`Timeout while loading ${t}.`,t))},n.onerror=()=>{r(new Y("connectionError",`Error while loading ${t}.`,t))},n.withCredentials=qe(t),n.send()}catch(n){r(new Y("connectionError",n.message,t))}}const Mt="4.0.2",Ve=Mt,Nt=["chrome-extension://","moz-extension://","resource://","ms-browser-extension://","safari-web-extension://"],Ht=60*1e3,Wt="",Re=[14,3,1];function Ot(t){const e=t.match(/<meta name="sidebar-version" content="(\d+)\.(\d+)\.(\d+)/);if(!e||e.length!==4)return null;const r=e.slice(1,4).map(n=>parseInt(n));return[r[0],r[1],r[2]]}class Pe extends Error{constructor(e,r,n){super(r),this.acrolinxErrorCode=e,this.url=n}}function qt(t,e,r){L("loadSidebarIntoIFrame",t);const n=t.sidebarUrl,o=n+"index.html?t="+Date.now();Dt(o,{timeout:1e4},i=>{if(typeof i!="string"){const l=i;A("Error while fetching the sidebar: "+l.acrolinxErrorCode,l),r(l);return}const a=i;if(a.indexOf('<meta name="sidebar-version"')<0){r(new Pe("noSidebar","No valid sidebar html code:"+a,o));return}const u=Ot(a),d=!u||!Ie(u,Re)||!Ie(u,t.minimumSidebarVersion);if(!Wt&&d){re(`Found sidebar version ${le(u)} (default minimumSidebarVersion=${le(Re)}, configured minimumSidebarVersion=${le(t.minimumSidebarVersion)})`),r(new Pe("sidebarVersionIsBelowMinimum","Sidebar version is smaller than minimumSidebarVersion",o));return}if(L("Sidebar HTML is loaded successfully"),t.timeoutWatcher.start(),t.useMessageAdapter){const l=()=>{e.removeEventListener("load",l),r()};e.addEventListener("load",l),e.src=o+"&acrolinxUseMessageApi=true"}else Vt(a,e,n),r()})}function le(t){return t==null?void 0:t.join(".")}function Vt(t,e,r){const n=e.contentWindow,o=t.replace(/src="/g,'src="'+r).replace(/href="/g,'href="'+r);n.document.open(),n.document.write(o),n.document.close()}const Bt=10;class $t{constructor(e){this.props=e}requestInit(){this.props.requestInitListener()}onInitFinished(e){this.props.acrolinxPlugin.onInitFinished(e)}requestGlobalCheck(e){e?this.props.acrolinxPlugin.requestGlobalCheck(e):this.props.acrolinxPlugin.requestGlobalCheck()}onCheckResult(e){this.props.acrolinxPlugin.onCheckResult(e)}selectRanges(e,r){this.props.acrolinxPlugin.selectRanges(e,r)}replaceRanges(e,r){this.props.acrolinxPlugin.replaceRanges(e,r)}openWindow(e){this.props.openWindow(e)}showServerSelector(){this.props.showServerSelector()}openLogFile(){this.props.acrolinxPlugin.openLogFile?this.props.acrolinxPlugin.openLogFile():A("openLogFile is not supported")}requestCheckForDocumentInBatch(e){this.props.acrolinxPlugin.requestCheckForDocumentInBatch?this.props.acrolinxPlugin.requestCheckForDocumentInBatch(e):A("requestCheckForDocumentInBatch is not supported")}onLiveSearchResults(e){this.props.acrolinxPlugin.onLiveSearchResults?this.props.acrolinxPlugin.onLiveSearchResults(e):A("onLiveSearchResult is not supported")}onLiveSearchFailed(e){this.props.acrolinxPlugin.onLiveSearchFailed?this.props.acrolinxPlugin.onLiveSearchFailed(e):A("onLiveSearchFailed is not supported")}openLivePanel(){this.props.acrolinxPlugin.openLivePanel?this.props.acrolinxPlugin.openLivePanel():A("openLivePanel is not supported")}onUILanguageChanged(e){this.props.acrolinxPlugin.onUILanguageChanged?this.props.acrolinxPlugin.onUILanguageChanged(e):A("onUILanguageChanged is not supported")}onTargetChanged(e){this.props.acrolinxPlugin.onTargetChanged?this.props.acrolinxPlugin.onTargetChanged(e):A("onTargetChanged is not supported")}openDocumentInEditor(e){if(this.props.acrolinxPlugin.openDocumentInEditor)return this.props.acrolinxPlugin.openDocumentInEditor(e);A("openDocumentInEditor is not supported")}log(e){this.props.acrolinxPlugin.log?this.props.acrolinxPlugin.log(e):A("log is not supported",e)}}function Be(t){const e=window;e.acrolinxPlugin?t(e.acrolinxPlugin):setTimeout(()=>{Be(t)},Bt)}function zt(t){return JSON.parse(JSON.stringify(t))}function jt(t,e,...r){t.postMessage({command:e,args:zt(r)},"*")}function Gt(t,e){for(const r in e){const n=e[r];e[r]=(...o)=>(jt(t(),r,...o),n.apply(e,o))}}function Kt(t){const e={init(r){},configure(r){},checkGlobal(r,n){return{checkId:"dummyCheckId"}},onGlobalCheckRejected(){},invalidateRanges(r){},onVisibleRangesChanged(r){},showMessage(r){},setStorage(r){}};return Gt(()=>t,e),e}class Qt{constructor(e){I(this,"_acrolinxSidebar");I(this,"_serverAddress");I(this,"configureQueue",[]);this.initListener=e}get serverAddress(){return this._serverAddress}set serverAddress(e){this._serverAddress=e}get acrolinxSidebar(){return this._acrolinxSidebar}set acrolinxSidebar(e){for(this._acrolinxSidebar=e;this.configureQueue.length>0;)this._acrolinxSidebar.configure(this.configureQueue.splice(0,1)[0])}init(e){this.initListener(e)}configure(e){this.acrolinxSidebar?this.acrolinxSidebar.configure(e):this.configureQueue.push(e)}checkGlobal(e,r){return this.acrolinxSidebar.checkGlobal(e,r)}onGlobalCheckRejected(){this.acrolinxSidebar.onGlobalCheckRejected()}invalidateRanges(e){this.acrolinxSidebar.invalidateRanges(e)}onVisibleRangesChanged(e){return this.acrolinxSidebar.onVisibleRangesChanged(e)}showMessage(e){return this.acrolinxSidebar.showMessage(e)}initBatchCheck(e){if(this.acrolinxSidebar.initBatchCheck)return this.acrolinxSidebar.initBatchCheck(e);A("initBatchCheck is not supported")}checkDocumentInBatch(e,r,n){if(this.acrolinxSidebar.checkDocumentInBatch)return this.acrolinxSidebar.checkDocumentInBatch(e,r,n);A("checkDocumentInBatch is not supported")}liveSearch(e){this.acrolinxSidebar.liveSearch?this.acrolinxSidebar.liveSearch(e):A("liveSearch is not supported")}}const $e={serverSelector:{aboutItems:{browserInformation:"Browser Information",logFileLocation:"Log File Location",serverSelector:"Start Page",startPageCorsOrigin:"CORS Origin"},button:{connect:"Connect",details:"Details",openLogFile:"Open Log File"},links:{about:"About Acrolinx",cantConnect:"Can't connect to Acrolinx?",needHelp:"Help",submitRequest:"Contact Acrolinx Support"},message:{invalidServerAddress:"It looks like the Acrolinx URL is incorrect. Check the URL and try again.",loadSidebarTimeout:"It looks like the Sidebar took too long to load. Check your network connection or contact your Acrolinx administrator.",outdatedServer:"It looks like your Acrolinx integration needs a newer Acrolinx Platform version to load the Sidebar. Ask your Acrolinx administrator to update your platform.",serverConnectionProblemHttp:"We couldn't connect to Acrolinx. Check that the URL is correct. If you still can't connect, contact your Acrolinx administrator. It might be that your Acrolinx Platform doesn’t accept unsecure connections.",serverConnectionProblemHttps:"We couldn't connect to Acrolinx. Check that the URL is correct. If you still can't connect, contact your Acrolinx administrator.",serverIsNoAcrolinxServerOrHasNoSidebar:"It looks like this isn’t an Acrolinx URL or this Acrolinx Platform version doesn't support the Sidebar. If you're sure that the Acrolinx URL is correct, ask your Acrolinx administrator to check your platform version.",serverIsNotSecure:'You need to connect to Acrolinx using a secure Acrolinx URL. A secure Acrolinx URL starts with "https".'},placeHolder:{serverAddress:"Acrolinx URL"},title:{about:"About",logFile:"Log File",serverAddress:"Acrolinx URL"},tooltip:{httpsRequired:'You need to connect to Acrolinx using a secure Acrolinx URL. A secure Acrolinx URL starts with "https".',openHelp:"Open help information in a web browser window"}}},Jt={serverSelector:{aboutItems:{browserInformation:"Informationen zum Browser",logFileLocation:"Speicherort der Protokolldatei",serverSelector:"Startseite",startPageCorsOrigin:"CORS Origin"},button:{connect:"Verbinden",details:"Details",openLogFile:"Protokolldatei öffnen"},links:{about:"Über Acrolinx",cantConnect:"Sie können keine Verbindung zu Acrolinx herstellen?",needHelp:"Hilfe",submitRequest:"Acrolinx Support kontaktieren"},message:{invalidServerAddress:"Ist die Acrolinx-URL korrekt? Überprüfen Sie die eingegebene URL und versuchen Sie es erneut.",loadSidebarTimeout:"Die Sidebar braucht zu lange zum Laden. Überprüfen Sie Ihre Netzwerkverbindung oder wenden Sie sich an Ihre*n Acrolinx-Admin.",outdatedServer:"Ihre Acrolinx-Integration benötigt eine neuere Version der Acrolinx-Plattform. Sonst lädt die Sidebar nicht. Bitten Sie Ihre*n Admin, die Plattform zu aktualisieren.",serverConnectionProblemHttp:"Wir konnten keine Verbindung zu Acrolinx herstellen. Stimmt die Acrolinx-URL? Wenn ja, wenden Sie sich an Ihre*n Admin. Möglicherweise akzeptiert Ihre Acrolinx-Plattform keine gesicherten Verbindungen.",serverConnectionProblemHttps:"Wir konnten keine Verbindung zu Acrolinx herstellen. Überprüfen Sie, ob die URL korrekt ist. Wenn Sie weiterhin keine Verbindung herstellen können, wenden Sie sich an Ihre*n Acrolinx-Admin.",serverIsNoAcrolinxServerOrHasNoSidebar:"Stimmt die Acrolinx-URL? Wenn ja, wird die Sidebar von der Acrolinx-Plattform evtl. nicht unterstützt? Fragen Sie Ihre*n Admin.",serverIsNotSecure:"Verwenden Sie eine gesicherte Acrolinx-URL. Eine gesicherte Acrolinx-URL beginnt mit „https“."},placeHolder:{serverAddress:"Acrolinx-URL"},title:{about:"Über",logFile:"Protokolldatei",serverAddress:"Acrolinx-URL"},tooltip:{httpsRequired:"Verwenden Sie eine gesicherte Acrolinx-URL. Eine gesicherte Acrolinx-URL beginnt mit „https“.",openHelp:"Hilfeinformationen in einem Webbrowser-Fenster öffnen"}}},Xt={serverSelector:{aboutItems:{browserInformation:"Informations du navigateur",logFileLocation:"Emplacement des fichiers journaux",serverSelector:"Page de démarrage",startPageCorsOrigin:"CORS Origin"},button:{connect:"Se connecter",details:"Détails",openLogFile:"Ouvrir le fichier journal"},links:{about:"A propos d´Acrolinx",cantConnect:"Vous ne réussissez pas à vous connecter à Acrolinx ?",needHelp:"Aide",submitRequest:"Contacter le support Acrolinx"},message:{invalidServerAddress:"Il semblerait que l'URL d'Acrolinx soit incorrecte. Corriger l'adresse et essayer à nouveau.",loadSidebarTimeout:"La Sidebar Acrolinx est trop lent à démarrer. Vérifier la connexion réseau ou contacter l'administrateur de Acrolinx. ",outdatedServer:"Il semblerait que la version de la plateforme Acrolinx ne prenne pas en charge la Sidebar. Contactez l'administrateur Acrolinx pour une mise à jour de la plateforme.",serverConnectionProblemHttp:"La connexion à Acrolinx n'a pas abouti. Est-ce que l'URL d'Acrolinx est correcte ? Si oui, contactez l'administrateur Acrolinx. Il se pourrait que votre serveur n'accepte pas de connexions sécurisées.",serverConnectionProblemHttps:"Nous n'avons pas pu vous connecter à Acrolinx. Vérifiez que l'URL est correcte. Si vous ne pouvez toujours pas vous connecter, contactez votre administrateur Acrolinx.",serverIsNoAcrolinxServerOrHasNoSidebar:"Est-ce que l'URL d'Acrolinx est correcte ? Si oui, il se pourrait que la version de la plateforme Acrolinx ne prend pas en charge la Sidebar. Contactez l'administrateur Acrolinx pour vérifier.",serverIsNotSecure:"Utilisez une URL d'Acrolinx sécurisée.  Une URL d'Acrolinx sécurisée commence par « https »."},placeHolder:{serverAddress:"URL d'Acrolinx"},title:{about:"A propos de",logFile:"Fichier journal",serverAddress:"URL d'Acrolinx"},tooltip:{httpsRequired:"Utilisez une URL d'Acrolinx sécurisée.  Une URL d'Acrolinx sécurisée commence par « https ».",openHelp:"Ouvrir les informations d'aide dans la fenêtre d'un navigateur Web."}}},Yt={serverSelector:{aboutItems:{browserInformation:"Webbläsarinformation",logFileLocation:"Plats för loggfil",serverSelector:"Startsida",startPageCorsOrigin:"CORS Origin"},button:{connect:"Anslut",details:"Detaljer",openLogFile:"Öppna loggfil"},links:{about:"Om Acrolinx",cantConnect:"Kan du inte ansluta till Acrolinx?",needHelp:"Hjälp",submitRequest:"Kontakta Acrolinx Support"},message:{invalidServerAddress:"Det ser ut som om Acrolinx-URL:en är felaktig. Kontrollera adressen och försök igen.",loadSidebarTimeout:"Det verkar som om det tar för lång tid att ladda Sidebar. Kontrollera din nätverksanslutning eller kontakta din Acrolinx-administratör.",outdatedServer:"Det verkar som om din Acrolinx-integration behöver en nyare Acrolinx-plattformversion för att kunna ladda Sidebar. Kontakta din Acrolinx-administratör för att uppdatera Acrolinx-servern.",serverConnectionProblemHttp:"Det gick inte att ansluta till Acrolinx. Kontrollera att URL:en är korrekt. Om du fortfarande inte kan ansluta till servern kontaktar du din Acrolinx-administratör. Det kan vara så att din Acrolinx-plattform inte accepterar säkra anslutningar.",serverConnectionProblemHttps:"Det gick inte att ansluta till Acrolinx. Kontrollera att URL:en är korrekt. Om du fortfarande inte kan ansluta till servern kontaktar du din Acrolinx-administratör.",serverIsNoAcrolinxServerOrHasNoSidebar:"Det verkar som om detta inte är en Acrolinx-URL eller att den här versionen av Acrolinx-plattformen inte stöder Sidebar. Om du är säker på att Acrolinx-URL:n är korrekt, be din Acrolinx-administratör att kontrollera din plattformsversion.",serverIsNotSecure:'Du behöver ansluta till Acrolinx med en säker Acrolinx-URL. En säker Acrolinx-URL börjar med "https".'},placeHolder:{serverAddress:"Acrolinx-URL"},title:{about:"Om",logFile:"Loggfil",serverAddress:"Acrolinx-URL"},tooltip:{httpsRequired:'Du behöver ansluta till Acrolinx med en säker Acrolinx-URL. En säker Acrolinx-URL börjar med "https".',openHelp:"Öppna hjälpinformationen i ett webbläsarfönster"}}},Zt={serverSelector:{aboutItems:{browserInformation:"ブラウザー情報",logFileLocation:"ログファイルの保存先",serverSelector:"スタートページ",startPageCorsOrigin:"CORS オリジン"},button:{connect:"接続する",details:"詳細",openLogFile:"ログファイルを開く"},links:{about:"Acrolinxについて",cantConnect:"接続に問題がありますか？",needHelp:"ヘルプ",submitRequest:"Acrolinx サポートに連絡する"},message:{invalidServerAddress:"Acrolinx の URL に誤りがあります。URL を確認し、再試行してください。",loadSidebarTimeout:"サイドバーを起動するのに時間がかかっています。ネットワークの接続を確認し、Acrolinx の管理者に連絡してください。",outdatedServer:"この Acrolinx プラグインのサイドバーを起動するには、新しいコアプラットフォームバージョンが必要です。Acrolinx の管理者に、コアプラットフォームの更新を依頼してください。",serverConnectionProblemHttp:"Acrolinx に接続できませんでした。URL が正しいかを確認してください。URL が正しいにも関わらず接続できない場合は、Acrolinx 管理者に連絡してください。Acrolinx コアプラットフォームが、保護された接続を許可していない可能性があります。",serverConnectionProblemHttps:"Acrolinx に接続できませんでした。URL が正しいかを確認してください。URL が正しいにも関わらず接続できない場合は、Acrolinx 管理者に連絡してください。",serverIsNoAcrolinxServerOrHasNoSidebar:"この URL は、Acrolinx の URL ではないか、このサイドバーがサポートされていないバージョンの Acrolinx コアプラットフォームです。URL が正しい場合は、Acrolinx の管理者に Acrolinx コアプラットフォームのバージョンを確認してください。",serverIsNotSecure:"セキュリティーで保護されている Acrolinx URL を使用して、Acrolinx に接続してください。保護されている Acrolinx サーバーの URL は、https で始まります。"},placeHolder:{serverAddress:"Acrolinx URL"},title:{about:"バージョン",logFile:"ログファイル",serverAddress:"Acrolinx URL"},tooltip:{httpsRequired:"セキュリティーで保護されている Acrolinx URL を使用して、Acrolinx に接続してください。保護されている Acrolinx サーバーの URL は、https で始まります。",openHelp:"ウェブブラウザーでヘルプ情報を開く"}}},er={de:Jt,fr:Xt,sv:Yt,ja:Zt};let ze=$e,de="en";function tr(t){de=rr(t),ze=er[de]||$e}function F(){return ze}function je(){return de}function rr(t){return(t||"en").toLowerCase().slice(0,2).replace("jp","ja")}class nr{constructor(e){this.value=e}match(e){return e.ok(this.value)}}class Ee{constructor(e){this.error=e}match(e){return e.err(this.error)}}function or(t,e){const r=wt(t.trim(),e);return Oe(r)&&_e(e)?new Ee(F().serverSelector.message.serverIsNotSecure):yt(r)?new nr(r):new Ee(F().serverSelector.message.invalidServerAddress)}var oe,S,Ge,B,Ue,Ke,pe,Qe,ve,fe,he,Q={},Je=[],ir=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Se=Array.isArray;function W(t,e){for(var r in e)t[r]=e[r];return t}function be(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Xe(t,e,r){var n,o,i,a={};for(i in e)i=="key"?n=e[i]:i=="ref"?o=e[i]:a[i]=e[i];if(arguments.length>2&&(a.children=arguments.length>3?oe.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)a[i]===void 0&&(a[i]=t.defaultProps[i]);return ee(t,a,n,o,null)}function ee(t,e,r,n,o){var i={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Ge,__i:-1,__u:0};return o==null&&S.vnode!=null&&S.vnode(i),i}function ie(t){return t.children}function H(t,e){this.props=t,this.context=e}function z(t,e){if(e==null)return t.__?z(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?z(t):null}function Ye(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Ye(t)}}function Fe(t){(!t.__d&&(t.__d=!0)&&B.push(t)&&!ne.__r++||Ue!==S.debounceRendering)&&((Ue=S.debounceRendering)||Ke)(ne)}function ne(){var t,e,r,n,o,i,a,u;for(B.sort(pe);t=B.shift();)t.__d&&(e=B.length,n=void 0,i=(o=(r=t).__v).__e,a=[],u=[],r.__P&&((n=W({},o)).__v=o.__v+1,S.vnode&&S.vnode(n),xe(r.__P,n,o,r.__n,r.__P.namespaceURI,32&o.__u?[i]:null,a,i??z(o),!!(32&o.__u),u),n.__v=o.__v,n.__.__k[n.__i]=n,tt(a,n,u),n.__e!=i&&Ye(n)),B.length>e&&B.sort(pe));ne.__r=0}function Ze(t,e,r,n,o,i,a,u,d,l,m){var s,h,p,b,y,x,g=n&&n.__k||Je,_=e.length;for(d=sr(r,e,g,d,_),s=0;s<_;s++)(p=r.__k[s])!=null&&(h=p.__i===-1?Q:g[p.__i]||Q,p.__i=s,x=xe(t,p,h,o,i,a,u,d,l,m),b=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&Ae(h.ref,null,p),m.push(p.ref,p.__c||b,p)),y==null&&b!=null&&(y=b),4&p.__u||h.__k===p.__k?d=et(p,d,t):typeof p.type=="function"&&x!==void 0?d=x:b&&(d=b.nextSibling),p.__u&=-7);return r.__e=y,d}function sr(t,e,r,n,o){var i,a,u,d,l,m=r.length,s=m,h=0;for(t.__k=new Array(o),i=0;i<o;i++)(a=e[i])!=null&&typeof a!="boolean"&&typeof a!="function"?(d=i+h,(a=t.__k[i]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?ee(null,a,null,null,null):Se(a)?ee(ie,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?ee(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=t,a.__b=t.__b+1,u=null,(l=a.__i=ar(a,r,d,s))!==-1&&(s--,(u=r[l])&&(u.__u|=2)),u==null||u.__v===null?(l==-1&&h--,typeof a.type!="function"&&(a.__u|=4)):l!=d&&(l==d-1?h--:l==d+1?h++:(l>d?h--:h++,a.__u|=4))):t.__k[i]=null;if(s)for(i=0;i<m;i++)(u=r[i])!=null&&!(2&u.__u)&&(u.__e==n&&(n=z(u)),rt(u,u));return n}function et(t,e,r){var n,o;if(typeof t.type=="function"){for(n=t.__k,o=0;n&&o<n.length;o++)n[o]&&(n[o].__=t,e=et(n[o],e,r));return e}t.__e!=e&&(e&&t.type&&!r.contains(e)&&(e=z(t)),r.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function ar(t,e,r,n){var o,i,a=t.key,u=t.type,d=e[r];if(d===null||d&&a==d.key&&u===d.type&&!(2&d.__u))return r;if(n>(d!=null&&!(2&d.__u)?1:0))for(o=r-1,i=r+1;o>=0||i<e.length;){if(o>=0){if((d=e[o])&&!(2&d.__u)&&a==d.key&&u===d.type)return o;o--}if(i<e.length){if((d=e[i])&&!(2&d.__u)&&a==d.key&&u===d.type)return i;i++}}return-1}function Te(t,e,r){e[0]=="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||ir.test(e)?r:r+"px"}function Z(t,e,r,n,o){var i;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||Te(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||Te(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")i=e!=(e=e.replace(Qe,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=r,r?n?r.u=n.u:(r.u=ve,t.addEventListener(e,i?he:fe,i)):t.removeEventListener(e,i?he:fe,i);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function De(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.t==null)e.t=ve++;else if(e.t<r.u)return;return r(S.event?S.event(e):e)}}}function xe(t,e,r,n,o,i,a,u,d,l){var m,s,h,p,b,y,x,g,_,T,R,D,O,J,q,P,E,k=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(d=!!(32&r.__u),i=[u=e.__e=r.__e]),(m=S.__b)&&m(e);e:if(typeof k=="function")try{if(g=e.props,_="prototype"in k&&k.prototype.render,T=(m=k.contextType)&&n[m.__c],R=m?T?T.props.value:m.__:n,r.__c?x=(s=e.__c=r.__c).__=s.__E:(_?e.__c=s=new k(g,R):(e.__c=s=new H(g,R),s.constructor=k,s.render=cr),T&&T.sub(s),s.props=g,s.state||(s.state={}),s.context=R,s.__n=n,h=s.__d=!0,s.__h=[],s._sb=[]),_&&s.__s==null&&(s.__s=s.state),_&&k.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=W({},s.__s)),W(s.__s,k.getDerivedStateFromProps(g,s.__s))),p=s.props,b=s.state,s.__v=e,h)_&&k.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),_&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(_&&k.getDerivedStateFromProps==null&&g!==p&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(g,R),!s.__e&&(s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(g,s.__s,R)===!1||e.__v==r.__v)){for(e.__v!=r.__v&&(s.props=g,s.state=s.__s,s.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(V){V&&(V.__=e)}),D=0;D<s._sb.length;D++)s.__h.push(s._sb[D]);s._sb=[],s.__h.length&&a.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(g,s.__s,R),_&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(p,b,y)})}if(s.context=R,s.props=g,s.__P=t,s.__e=!1,O=S.__r,J=0,_){for(s.state=s.__s,s.__d=!1,O&&O(e),m=s.render(s.props,s.state,s.context),q=0;q<s._sb.length;q++)s.__h.push(s._sb[q]);s._sb=[]}else do s.__d=!1,O&&O(e),m=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++J<25);s.state=s.__s,s.getChildContext!=null&&(n=W(W({},n),s.getChildContext())),_&&!h&&s.getSnapshotBeforeUpdate!=null&&(y=s.getSnapshotBeforeUpdate(p,b)),u=Ze(t,Se(P=m!=null&&m.type===ie&&m.key==null?m.props.children:m)?P:[P],e,r,n,o,i,a,u,d,l),s.base=e.__e,e.__u&=-161,s.__h.length&&a.push(s),x&&(s.__E=s.__=null)}catch(V){if(e.__v=null,d||i!=null)if(V.then){for(e.__u|=d?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;i[i.indexOf(u)]=null,e.__e=u}else for(E=i.length;E--;)be(i[E]);else e.__e=r.__e,e.__k=r.__k;S.__e(V,e,r)}else i==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):u=e.__e=lr(r.__e,e,r,n,o,i,a,d,l);return(m=S.diffed)&&m(e),128&e.__u?void 0:u}function tt(t,e,r){for(var n=0;n<r.length;n++)Ae(r[n],r[++n],r[++n]);S.__c&&S.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(i){i.call(o)})}catch(i){S.__e(i,o.__v)}})}function lr(t,e,r,n,o,i,a,u,d){var l,m,s,h,p,b,y,x=r.props,g=e.props,_=e.type;if(_=="svg"?o="http://www.w3.org/2000/svg":_=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),i!=null){for(l=0;l<i.length;l++)if((p=i[l])&&"setAttribute"in p==!!_&&(_?p.localName==_:p.nodeType==3)){t=p,i[l]=null;break}}if(t==null){if(_==null)return document.createTextNode(g);t=document.createElementNS(o,_,g.is&&g),u&&(S.__m&&S.__m(e,i),u=!1),i=null}if(_===null)x===g||u&&t.data===g||(t.data=g);else{if(i=i&&oe.call(t.childNodes),x=r.props||Q,!u&&i!=null)for(x={},l=0;l<t.attributes.length;l++)x[(p=t.attributes[l]).name]=p.value;for(l in x)if(p=x[l],l!="children"){if(l=="dangerouslySetInnerHTML")s=p;else if(!(l in g)){if(l=="value"&&"defaultValue"in g||l=="checked"&&"defaultChecked"in g)continue;Z(t,l,null,p,o)}}for(l in g)p=g[l],l=="children"?h=p:l=="dangerouslySetInnerHTML"?m=p:l=="value"?b=p:l=="checked"?y=p:u&&typeof p!="function"||x[l]===p||Z(t,l,p,x[l],o);if(m)u||s&&(m.__html===s.__html||m.__html===t.innerHTML)||(t.innerHTML=m.__html),e.__k=[];else if(s&&(t.innerHTML=""),Ze(t,Se(h)?h:[h],e,r,n,_=="foreignObject"?"http://www.w3.org/1999/xhtml":o,i,a,i?i[0]:r.__k&&z(r,0),u,d),i!=null)for(l=i.length;l--;)be(i[l]);u||(l="value",_=="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[l]||_=="progress"&&!b||_=="option"&&b!==x[l])&&Z(t,l,b,x[l],o),l="checked",y!==void 0&&y!==t[l]&&Z(t,l,y,x[l],o))}return t}function Ae(t,e,r){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&e==null||(t.__u=t(e))}else t.current=e}catch(o){S.__e(o,r)}}function rt(t,e,r){var n,o;if(S.unmount&&S.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||Ae(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){S.__e(i,e)}n.base=n.__P=null}if(n=t.__k)for(o=0;o<n.length;o++)n[o]&&rt(n[o],e,r||typeof t.type!="function");r||be(t.__e),t.__c=t.__=t.__e=void 0}function cr(t,e,r){return this.constructor(t,r)}function ce(t,e,r){var n,o,i,a;e==document&&(e=document.documentElement),S.__&&S.__(t,e),o=(n=typeof r=="function")?null:r&&r.__k||e.__k,i=[],a=[],xe(e,t=(!n&&r||e).__k=Xe(ie,null,[t]),o||Q,Q,e.namespaceURI,!n&&r?[r]:o?null:e.firstChild?oe.call(e.childNodes):null,i,!n&&r?r:o?o.__e:e.firstChild,n,a),tt(i,t,a)}oe=Je.slice,S={__e:function(t,e,r,n){for(var o,i,a;e=e.__;)if((o=e.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(t)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,n||{}),a=o.__d),a)return o.__E=o}catch(u){t=u}throw t}},Ge=0,H.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=W({},this.state),typeof t=="function"&&(t=t(W({},r),this.props)),t&&W(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),Fe(this))},H.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Fe(this))},H.prototype.render=ie,B=[],Ke=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pe=function(t,e){return t.__v.__b-e.__v.__b},ne.__r=0,Qe=/(PointerCapture)$|Capture$/i,ve=0,fe=De(!1),he=De(!0);function ur(t,e){const r=t.accessToken&&t.showServerSelector;return r&&re(`Ignore accessToken because showServerSelector=${t.showServerSelector}`),{...t,serverAddress:e,accessToken:r?void 0:t.accessToken,showServerSelector:!1,corsWithCredentials:t.corsWithCredentials||qe(e),supported:{...t.supported,showServerSelector:t.showServerSelector},clientComponents:nt(t.clientComponents)}}function nt(t){return(t||[]).concat({id:"com.acrolinx.serverselector",name:F().serverSelector.aboutItems.serverSelector,version:Ve,category:U.SoftwareComponentCategory.DEFAULT})}function dr(t,e){const r=(t||"").replace(/[^a-zA-Z0-9]+/g,".");return r==="."||r===""?"unknown.client.component.id.with.index."+e:r}function pr(t,e){return{...t,id:t.id||dr(t.name,e),name:t.name||t.id||"unknown client component name",version:t.version||"0.0.0.0"}}function ue(t,e){return t.indexOf(e)>=0}function fr(){const t=navigator.userAgent;return ue(t,"AppleWebKit")&&!(ue(t,"Chrome")||ue(t,"Edge"))}function hr(){if(!fr())return;const t=document.querySelector("body");t&&(t.style.display="none",t.offsetHeight,t.style.display="block")}function C(t){return(e,...r)=>Xe(t,e,...r)}const w=C("div"),me=C("span"),we=C("button"),ot=C("h1"),mr=C("form"),Le=C("a"),gr=C("input");function it(...t){const e=[];for(let r=0;r<t.length;r++){const n=t[r];if(n){if(typeof n=="string")e.push(n);else if(typeof n=="object")for(const o in n)n.hasOwnProperty(o)&&n[o]&&e.push(o)}}return e.join(" ")}const _r={submitRequestUrl:"https://support.acrolinx.com/hc/en-us/requests/new",cantConnectHelpLink:"https://support.acrolinx.com/hc/en-us/articles/10220860699794-Why-can-t-I-connect-my-Sidebar-Edition-Integration-to-the-Acrolinx-Core-Platform-",helpLinkUrl:"https://support.acrolinx.com/hc/en-us"},vr={submitRequestUrl:"https://support.acrolinx.com/hc/de/requests/new",cantConnectHelpLink:"https://support.acrolinx.com/hc/de/articles/10220860699794-Why-can-t-I-connect-my-Sidebar-Edition-Integration-to-the-Acrolinx-Core-Platform-",helpLinkUrl:"https://support.acrolinx.com/hc/de"},Me={en:_r,de:vr};function st(t){return t==="de"?Me.de:Me.en}function Sr(){const t=je();return st(t).helpLinkUrl}class br extends H{render(){const e=this.props;return Le({className:"icon-help",title:F().serverSelector.tooltip.openHelp,onClick:r=>{r.preventDefault(),r.stopPropagation(),e.openWindow(e.initParameters.helpUrl||Sr())},href:"#"})}}const at=C(br);function xr(t){return w({className:"about-item",key:t.id},w({className:"about-tab-label"},t.name),w({className:"about-tab-value",title:t.version},t.version))}const Ar={[U.SoftwareComponentCategory.MAIN]:"1",[U.SoftwareComponentCategory.DEFAULT]:"2",[U.SoftwareComponentCategory.DETAIL]:"3"};function wr(t){return Ar[t.category||"DEFAULT"]+t.name.toLowerCase()}function Lr(t){const e=F().serverSelector,r=[{id:"com.acrolinx.userAgent",name:e.aboutItems.browserInformation,version:navigator.userAgent,category:U.SoftwareComponentCategory.DEFAULT},{id:"com.acrolinx.startPageCorsOrigin",name:e.aboutItems.startPageCorsOrigin,version:Ct(),category:U.SoftwareComponentCategory.DEFAULT}];return t&&r.push({id:"com.acrolinx.logFileLocation",name:e.aboutItems.logFileLocation,version:t,category:U.SoftwareComponentCategory.DEFAULT}),r}class yr extends H{componentDidMount(){hr()}render(){const e=F().serverSelector,r=this.props,n=this.props.clientComponents.map(pr),o=It(n.concat(Lr(r.logFileLocation)),wr);return w({className:"aboutComponent"},w({className:it("aboutHeader"),onClick:r.onBack},me({className:"icon-arrow-back"}),at(r)),w({className:"aboutBody"},w({className:"aboutMain"},ot({},e.title.about),o.map(xr))),w({className:"aboutFooter"},r.logFileLocation?w({className:"buttonGroup logFileSection"},me({className:"openLogFileTitle"},e.title.logFile),we({className:"submitButton",onClick:r.openLogFile},e.button.openLogFile)):[]))}}const kr=C(yr);class Cr extends H{render(){const e=this.props;return Le({className:"externalTextLink",onClick:r=>{r.preventDefault(),e.openWindow(e.url)},href:"#"},this.props.text)}}const Ne=C(Cr);class Ir extends H{constructor(){super(...arguments);I(this,"state",{showDetails:!1});I(this,"toggleErrorDetails",r=>{r.preventDefault(),this.setState({showDetails:!this.state.showDetails})});I(this,"selectDetailMessage",r=>{r.preventDefault();const n=window.getSelection(),o=document.createRange();o.selectNodeContents(r.target),n==null||n.removeAllRanges(),n==null||n.addRange(o)})}getErrorDetailsMessage(){return this.state.showDetails?w({className:"detailedErrorMessage",onClick:this.selectDetailMessage},this.props.detailedMessage):[]}render(){const r=this.props;return w({className:it("errorMessage",{hasDetailsSection:!!this.props.detailedMessage})},w({className:"errorMessageMain",dangerouslySetInnerHTML:{__html:r.messageHtml.html}}),this.props.detailedMessage?w({className:"detailedErrorSection"},we({className:"detailsButton",onClick:this.toggleErrorDetails},F().serverSelector.button.details),this.getErrorDetailsMessage()):[])}}const lt=C(Ir),ct="serverAddress";function Rr(){const t=je();return st(t)}class Pr extends H{constructor(){super(...arguments);I(this,"serverAddressField");I(this,"onSubmit",r=>{r.preventDefault(),this.props.onSubmit(this.serverAddressField.value)})}render(){const r=F().serverSelector,n=Rr(),o=this.props,i=_e({enforceHTTPS:o.enforceHTTPS,windowLocation:window.location});return mr({className:"serverSelectorFormComponent",onSubmit:this.onSubmit},w({className:"logoHeader"},at(o)),w({className:"formContent"},w({className:"paddedFormContent"},ot({className:"serverAddressTitle",title:i?r.tooltip.httpsRequired:""},r.title.serverAddress,i?me({className:"httpsRequiredIcon"}):[]),gr({className:ct,name:"acrolinxServerAddress",placeholder:r.placeHolder.serverAddress,autofocus:!0,ref:a=>{this.serverAddressField=a},defaultValue:o.serverAddress,spellCheck:"false"}),w({className:"buttonGroup"},Ne({url:n.cantConnectHelpLink,openWindow:o.openWindow,text:r.links.cantConnect}),we({type:"submit",className:"submitButton",disabled:o.isConnectButtonDisabled},r.button.connect)),w({className:"submitRequest"},Ne({url:n.submitRequestUrl,openWindow:o.openWindow,text:r.links.submitRequest})),Le({onClick:a=>{a.preventDefault(),o.onAboutLink()},href:"#"},r.links.about)),o.errorMessage?lt(o.errorMessage):[]))}}const Er=C(Pr);function Ur(t){const e=t.getElementsByClassName(ct).item(0);e&&e.focus()}function Fr(t){try{if(!t)return!1;const e="__storage_test__";return t.setItem(e,e),t.getItem(e)!==e?!1:(t.removeItem(e),!0)}catch{return!1}}class Tr{constructor(){I(this,"dataMap",{})}clear(){this.dataMap={}}setItem(e,r){this.dataMap[e]=r}getItem(e){const r=this.dataMap[e];return r===void 0?null:r}removeItem(e){delete this.dataMap[e]}}const Dr=!1;function Mr(t,e){return t?(L("acrolinxStartpage: Using window.acrolinxStorage"),t):Fr(e)&&!Dr?(L("acrolinxStartpage: Using window.localStorage"),e):(L("acrolinxStartpage: Using AcrolinxSimpleStorageInMemory"),new Tr)}function Nr(){try{return window.localStorage}catch{return}}function ut(){return Mr(window.acrolinxStorage,Nr())}let te;function G(){return te||(te=ut()),te}function Hr(){te=ut()}function Wr(t,e){t.acrolinxStorage&&(L("Inject window.acrolinxStorage into sidebar"),e.acrolinxStorage=t.acrolinxStorage)}function Or(){const t=document.getElementById("FirebugUI");if(!t||!t.contentWindow)return!1;try{const e=t.contentWindow.document.getElementById("fbWindow_btDeactivate");e.style.display="none"}catch{return!1}return!0}function dt(){Or()||setTimeout(dt,500)}function qr(){L("Loading firebug lite into sidebar startpage ..."),Ut("https://getfirebug.com/releases/lite/1.3/firebug-lite.js#startOpened=true"),dt()}function Vr(){let t="",e=!1;document.addEventListener("keypress",r=>{if(e){const n=r.key||String.fromCharCode(r.charCode);t+=n}}),document.addEventListener("mousedown",()=>{e=!0,t=""}),document.addEventListener("mouseup",()=>{e=!1,t==="acrofire"?qr():t.length>3&&L("Unknown command:",t),t=""})}function Br(){Vr()}const He="acrolinx.serverSelector.serverAddress",$r=`
  <div id="serverSelectorFormPage" style="display: none"></div>
  <div id="aboutPage" style="display: none"></div>
  <div id="errorMessagePage" style="display: none"></div>
  <div id="loadingSidebarMessagePage">
    <div class="loader loaderJsLoaded"><span class="fallbackLoadingMessage">Loading ...</span></div>
  </div>
  <div id="sidebarContainer" style="display: none"></div>
`;function zr(){return xt(window.location.href,Nt)}function jr(t={}){ae(c=>{const f=window.acrolinxPlugin;f!=null&&f.log&&f.log(c)}),L("Loading acrolinx sidebar startpage "+Ve),Br();const e=window,r=new Qt(pt);let n,o;e.acrolinxSidebar=r;const i=zr(),a=St("#app");a.innerHTML=$r;const u=X("sidebarContainer"),d=X("errorMessagePage"),l=X("aboutPage"),m=X("serverSelectorFormPage");let s,h,p;const b=new Ft(ht,t.requestInitTimeOutMs||Ht);let y=0;P("loadingSidebarMessagePage"),Be(c=>{Hr(),h=G().getItem(He),n=c,n.requestInit(),i&&(L("useMessageAdapter"),addEventListener("message",ft,!1))});function x(){L("clicked openLogFile"),n.openLogFile?n.openLogFile():A("acrolinxPlugin.openLogFile is not defined!")}function g(c){n!=null&&n.openWindow&&!(o!=null&&o.openWindowDirectly)?n.openWindow(c):window.open(c.url)}function _(c){L(`User tries to connect with server "${c}"`),or(c,{enforceHTTPS:o.enforceHTTPS,windowLocation:window.location}).match({ok:v=>{h=v,T(h)},err:v=>{E({errorMessage:D(v)})}})}function T(c){L(`Try to load sidebar from "${c}"`),u.innerHTML="",s=document.createElement("iframe"),u.appendChild(s);const f=Rt(o.minimumSidebarVersion);let v=Ce(c,"/sidebar/v15/");f.length!==0&&f[0]===14&&(v=Ce(c,"/sidebar/v14/"));const M={sidebarUrl:v,useMessageAdapter:i,timeoutWatcher:b,minimumSidebarVersion:f};p==="serverSelectorFormPage"?k({isConnectButtonDisabled:!0}):(R(),P("loadingSidebarMessagePage")),qt(M,s,j=>{if(j){k({isConnectButtonDisabled:!1}),J(c,j);return}if(o.showServerSelector&&G().setItem(He,c),P("sidebarContainer"),i)return;const se=s.contentWindow;Wr(window,se),se.acrolinxPlugin=new $t({requestInitListener:()=>{r.acrolinxSidebar=se.acrolinxSidebar,ye()},acrolinxPlugin:n,serverAddress:c,showServerSelector:E,openWindow:g})})}function R(){const c=a.querySelector(".loader");c&&c.classList.add("loadSidebarHtml")}function D(c,f){return{messageHtml:{html:c},detailedMessage:f&&JSON.stringify(f)}}function O(c,f){const v=F().serverSelector.message;switch(f.acrolinxErrorCode){case"httpErrorStatus":case"noSidebar":return D(v.serverIsNoAcrolinxServerOrHasNoSidebar,f);case"sidebarVersionIsBelowMinimum":return D(v.outdatedServer,f);default:const M=Oe(c)?v.serverConnectionProblemHttp:v.serverConnectionProblemHttps;return D(M,f)}}function J(c,f){q(O(c,f))}function q(c){o.showServerSelector?E({errorMessage:c}):V(c)}function P(c){const f=a.childNodes;for(let v=0;v<f.length;++v){const M=f[v];bt(M,c===M.id)}p=c}function E(c={}){y=0,Pt(u,()=>{P("serverSelectorFormPage"),Ur(m),k(c)})}function k(c={}){ce(Er({onSubmit:_,onAboutLink:mt,serverAddress:h,enforceHTTPS:o.enforceHTTPS,isConnectButtonDisabled:c.isConnectButtonDisabled,openWindow:f=>g({url:f}),errorMessage:c.errorMessage,initParameters:o}),m,m.firstChild)}function V(c){P("errorMessagePage"),ce(lt(c),d,d.firstChild)}function pt(c){var f;o=c,tr(c.clientLocale),(f=c.supported)!=null&&f.log&&n.log?ae(v=>n.log(v)):ae(void 0),c.showServerSelector?h?T(h):(c.serverAddress&&(h=c.serverAddress),E()):(L("Load directly!"),h=c.serverAddress||We(window.location),T(h))}function ft(c){if(!(s!=null&&s.contentWindow)||c.source!==s.contentWindow)return;const f=c.data.command,v=c.data.args;switch(f==="setStorageItem"?L("onMessageFromSidebar",f,v[0]):L("onMessageFromSidebar",c,f,v),f){case"requestInit":r.acrolinxSidebar=Kt(s.contentWindow),ye();break;case"showServerSelector":E();break;case"setStorageItem":G().setItem(v[0],v[1]);break;case"removeStorageItem":G().removeItem(v[0]);break;default:const M=e.acrolinxPlugin,j=M[f];j?j.apply(M,v):A(`Plugin does not support command "${f}"`,v)}}function ye(){L(`Sidebar is loaded completely and has requested init ("${h}")`),y=1,b.stop();function c(){r.acrolinxSidebar.init(ur(o,h))}const f=G();f.getItems?f.getItems(v=>{r.acrolinxSidebar.setStorage({data:v}),c()}):c()}function ht(){y===0&&(A(`Sidebar took too long to load from "${h}"`),q({messageHtml:{html:F().serverSelector.message.loadSidebarTimeout}}))}function mt(){P("aboutPage"),ce(kr({onBack(){E()},logFileLocation:o.logFileLocation,openLogFile:x,clientComponents:nt(o.clientComponents),openWindow:c=>g({url:c}),initParameters:o}),l,l.firstChild)}}setTimeout(jr,500);
